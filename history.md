# История

Разрабатывая домашний проект на Yii2, у меня накопилась кодовая база, которую я мог бы использовать на других проектах.

В компании, где я работал, была поставлена задача переписать с нуля сервис.
Я скопировал свой шаблон приложения на Yii2 в новый проект.
Для поддержки своих наработок в двух проектах, мне приходилось их копировать из проекта в проект, это довольно трудоемко.

Для решения этой рутины, я создал composer-пакет и переместил наработки в него, подключил пакет к проектам.
Теперь поддержка и доставка обновлений в наработках стала гораздо приятнее.

Кодовая база разрослась, я поделил ее на несколько composer-пакетов.

Далее была задача написать сервис с нуля, используя Laravel.
Использовать свои наработки я не смог, ибо они были жестко заточены только под Yii2.
В итоге, пришлось написать сервис на Yii2.
Потом мы подняли еще около 5-6 сервисов на этом шаблоне, все было замечательно.

Когда я познакомился с Symfony, я заметил, что в нем используются сервисы, сущности, 
репозитории и все это похоже на то, что я делал на Yii2, используя парадигму DDD.

Мне захотелось использовать свои наработки на Symfony, но они были жестко привязанны к Yii2.
Я переписал 80% наработок с нуля, чтобы их можно было использовать независимо от фрэймворка, по всем канонам DDD.
Использовал подход Symfony, ибо архитектура сервисов в Symfony выполнена независимо от самого Symfony, 
во главе всего Container и DI.

Компоненты для доступа к БД, кешу, переводам и т.д. использовал независимые от фрэймворков.
Был расчет на то, что приложение вообще может не иметь фрэймворка и запускаться на чистом PHP,
при этом чтобы можно было использовать БД, кеш, переводы.

Компоненты:

* валидация сущностей и форм от Symfony
* мультиязычность от I18Next (мультиплатформенный: PHP, JS и еще много чего...)
* поддержка ORM
    * Eloquent
    * Doctrine
* логгер от Monolog
* кеширование от Symfony
* переменные окружения DotEnv от Symfony
* диспетчер событий от Symfony

## Выбор фрэймворка

Идеальный фрэймворк для меня - Symfony,
но у него есть несколько недостатков:

* высокий порог входа
* надо писать много кода даже для реализации простых вещей

Он себя оправдывает на больших и сложных проектах,
для средней сложности проектов он излишен.

Yii2 - оптимальный вариант, низкий порог входа, 
а архитектурный недостаток лечится использованием Рельсов.
С использованием Yii2 и Рельсов можно развивать большие и сложные проекты.
А если в будущем надо будет переехать на другой фрэймворк,
то надо будет переписать только верхний слой: контроллеры, вьюхи и конфиги,
а доменный слой останется как есть.
